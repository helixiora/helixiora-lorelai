# Lorelai readme

## Overview

Lorelai: a RAG (Retrieval-Augmented Generation) application. The project integrates with Google
Drive via OAuth for content crawling, utilizes Pinecone for indexing, and leverages OpenAI's API for
query processing. Its main components include a Flask-based web application for Google OAuth setup,
nightly document indexing, and a testing script for query execution.

### Key Features

- **Ask questions to your private google docs** A chat interface to ask questions to the info you
  have indexed
- **Google Drive Integration:** Securely crawl a user's Google Drive contents using OAuth.
- **Automated Indexing:** Nightly indexing of Google Drive documents into Pinecone for efficient
  retrieval.
- **Query Processing:** Leverage OpenAI's API to process queries with context retrieved from
  Pinecone.
- **Admin backend** See what info you have indexed in pinecone

### Components

Check out the [docs](./docs/main.md) for the individual components or the Architecture Diagram below
for a more detailed overview. Note that the former is autogenerated using pydoc-markdown. We are
working on better solutions in future.

## Prerequisites

Before starting out with LorelAI, please make sure you've met the
[prerequisites](./docs/prerequisites.md)

## Getting Started

Follow [these steps](./docs/getting_started.md) to set up the project and run the components.

## Operating Lorelai

Check the [operating procedures](./docs/ops.md) document to see how to perform common tasks

## Contributing

Please make sure to read up on our
[contributing guide](https://github.com/helixiora/.github/blob/main/CONTRIBUTING.md)

Most importantly for this project though we use [ruff](https://docs.astral.sh/ruff/), please ensure
your IDE has it installed per their guides.

## CI

To ensure that the code quality is maintained across all branches, we integrate these tools into our
CI/CD pipeline using GitHub Actions.

### Pre-commit Setup

Pre-commit hooks help enforce standards by automatically checking and formatting code before it's
committed to the repository.

1. Install pre-commit on your local development machine. It's recommended to install it globally
   using `pip install pre-commit`
1. Install the hooks using `pre-commit install`

Now, every time you commit the hooks in `.pre-commit-config.yaml` will be run and the commit will
fail if those hooks make a change

### Build and deployment pipelines

Our deployments rely on container images of the application and the worker that talks to redis.

To that end the Dockerfile.web.prod is used to build the web app and Dockerfile.worker.prod builds
the worker.

The .prod appendix is used for files that are related to building a package that is deployable on
our target infra and that we guarantee will work. Any other Dockerfiles (or other deployment helper
files) are to be used for local/dev deployments and we don't ensure they will work on all
infrastructure.

These then get published to Github's container registry and are available in the Packages section
here.

## Architecture diagram

Below a schematic of how we could build each of these modules so that we can keep the architecture
manageable

![Lorelai System Diagram](./docs/imgs/Lorelai%20System%20Diagram.png)

## Frequently Asked Questions

For a number of in-depth questions, see the [FAQ](docs/faq.md)
